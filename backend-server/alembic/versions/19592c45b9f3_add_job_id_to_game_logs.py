"""Add job_id to game_logs

Revision ID: 19592c45b9f3
Revises: 569abf0ec098
Create Date: 2025-07-11 05:18:45.479852

"""
from typing import Sequence, Union

from alembic import op
import sqlalchemy as sa
from sqlalchemy.dialects import postgresql

# revision identifiers, used by Alembic.
revision: str = '19592c45b9f3'
down_revision: Union[str, None] = '569abf0ec098'
branch_labels: Union[str, Sequence[str], None] = None
depends_on: Union[str, Sequence[str], None] = None


def upgrade() -> None:
    """Upgrade schema."""
    # ### commands auto generated by Alembic - please adjust! ###
    op.add_column(
        'game_logs', 
        sa.Column('job_id', sa.String(), nullable=True)
    )
    op.create_foreign_key(
        'fk_game_logs_job_id_job',
        'game_logs',
        'job',
        ['job_id'],
        ['id']
    )
    op.create_index(op.f('ix_game_logs_job_id'), 'game_logs', ['job_id'], unique=False)
    # ### end Alembic commands ###


def downgrade() -> None:
    """Downgrade schema."""
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_index(op.f('ix_game_logs_job_id'), table_name='game_logs')
    op.drop_constraint('fk_game_logs_job_id_job', 'game_logs', type_='foreignkey')
    op.drop_column('game_logs', 'job_id')
    # ### end Alembic commands ###
